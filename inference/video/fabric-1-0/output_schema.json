{
  "$defs": {
    "AudioMeta": {
      "description": "Metadata for audio inputs/outputs.",
      "properties": {
        "type": {
          "default": "audio",
          "title": "Type",
          "type": "string"
        },
        "extra": {
          "anyOf": [
            {
              "additionalProperties": true,
              "type": "object"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "App-specific key-value pairs for custom pricing factors",
          "title": "Extra"
        },
        "seconds": {
          "default": 0,
          "description": "Duration in seconds",
          "title": "Seconds",
          "type": "number"
        },
        "sample_rate": {
          "default": 0,
          "description": "Sample rate in Hz",
          "title": "Sample Rate",
          "type": "integer"
        }
      },
      "title": "AudioMeta",
      "type": "object"
    },
    "File": {
      "$id": "/schemas/File",
      "oneOf": [
        {
          "description": "A class representing a file in the inference.sh ecosystem.",
          "properties": {
            "uri": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "title": "Uri"
            },
            "path": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "title": "Path"
            },
            "content_type": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "title": "Content Type"
            },
            "size": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "title": "Size"
            },
            "filename": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "title": "Filename"
            }
          },
          "title": "File",
          "type": "object"
        },
        {
          "type": "string"
        }
      ]
    },
    "ImageMeta": {
      "description": "Metadata for image inputs/outputs.",
      "properties": {
        "type": {
          "default": "image",
          "title": "Type",
          "type": "string"
        },
        "extra": {
          "anyOf": [
            {
              "additionalProperties": true,
              "type": "object"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "App-specific key-value pairs for custom pricing factors",
          "title": "Extra"
        },
        "width": {
          "default": 0,
          "description": "Image width in pixels",
          "title": "Width",
          "type": "integer"
        },
        "height": {
          "default": 0,
          "description": "Image height in pixels",
          "title": "Height",
          "type": "integer"
        },
        "resolution_mp": {
          "default": 0,
          "description": "Resolution in megapixels (width * height / 1_000_000)",
          "title": "Resolution Mp",
          "type": "number"
        },
        "steps": {
          "default": 0,
          "description": "Number of diffusion steps",
          "title": "Steps",
          "type": "integer"
        },
        "count": {
          "default": 1,
          "description": "Number of images",
          "title": "Count",
          "type": "integer"
        }
      },
      "title": "ImageMeta",
      "type": "object"
    },
    "OutputMeta": {
      "description": "Structured metadata about task inputs and outputs for pricing calculation.\n\nApps include this in their output to report what was consumed (inputs)\nand what was produced (outputs). The backend uses this with CEL expressions\nto calculate app-level pricing.\n\nExample usage in an LLM app:\n    output_meta = OutputMeta(\n        inputs=[TextMeta(tokens=150)],\n        outputs=[TextMeta(tokens=500)]\n    )\n\nExample usage in a video generation app:\n    output_meta = OutputMeta(\n        outputs=[VideoMeta(\n            resolution=VideoResolution.RES_1080P,\n            resolution_mp=2.07,\n            seconds=10.5,\n            fps=30\n        )]\n    )",
      "properties": {
        "inputs": {
          "description": "Metadata about consumed inputs",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/TextMeta"
              },
              {
                "$ref": "#/$defs/ImageMeta"
              },
              {
                "$ref": "#/$defs/VideoMeta"
              },
              {
                "$ref": "#/$defs/AudioMeta"
              },
              {
                "$ref": "#/$defs/RawMeta"
              }
            ]
          },
          "title": "Inputs",
          "type": "array"
        },
        "outputs": {
          "description": "Metadata about produced outputs",
          "items": {
            "anyOf": [
              {
                "$ref": "#/$defs/TextMeta"
              },
              {
                "$ref": "#/$defs/ImageMeta"
              },
              {
                "$ref": "#/$defs/VideoMeta"
              },
              {
                "$ref": "#/$defs/AudioMeta"
              },
              {
                "$ref": "#/$defs/RawMeta"
              }
            ]
          },
          "title": "Outputs",
          "type": "array"
        }
      },
      "title": "OutputMeta",
      "type": "object"
    },
    "RawMeta": {
      "description": "Metadata for raw inputs/outputs used for custom pricing.",
      "properties": {
        "type": {
          "default": "raw",
          "title": "Type",
          "type": "string"
        },
        "extra": {
          "anyOf": [
            {
              "additionalProperties": true,
              "type": "object"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "App-specific key-value pairs for custom pricing factors",
          "title": "Extra"
        },
        "cost": {
          "default": 0,
          "description": "Cost in dollar cents",
          "title": "Cost",
          "type": "number"
        }
      },
      "title": "RawMeta",
      "type": "object"
    },
    "TextMeta": {
      "description": "Metadata for text inputs/outputs (e.g., LLM tokens).",
      "properties": {
        "type": {
          "default": "text",
          "title": "Type",
          "type": "string"
        },
        "extra": {
          "anyOf": [
            {
              "additionalProperties": true,
              "type": "object"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "App-specific key-value pairs for custom pricing factors",
          "title": "Extra"
        },
        "tokens": {
          "default": 0,
          "description": "Token count - in inputs[] = input tokens, in outputs[] = output tokens",
          "title": "Tokens",
          "type": "integer"
        }
      },
      "title": "TextMeta",
      "type": "object"
    },
    "VideoMeta": {
      "description": "Metadata for video inputs/outputs.",
      "properties": {
        "type": {
          "default": "video",
          "title": "Type",
          "type": "string"
        },
        "extra": {
          "anyOf": [
            {
              "additionalProperties": true,
              "type": "object"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "App-specific key-value pairs for custom pricing factors",
          "title": "Extra"
        },
        "width": {
          "default": 0,
          "description": "Video width in pixels",
          "title": "Width",
          "type": "integer"
        },
        "height": {
          "default": 0,
          "description": "Video height in pixels",
          "title": "Height",
          "type": "integer"
        },
        "resolution_mp": {
          "default": 0,
          "description": "Resolution in megapixels per frame",
          "title": "Resolution Mp",
          "type": "number"
        },
        "resolution": {
          "anyOf": [
            {
              "$ref": "#/$defs/VideoResolution"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Standard resolution preset (480p, 720p, 1080p, 1440p, 4k)"
        },
        "seconds": {
          "default": 0,
          "description": "Duration in seconds",
          "title": "Seconds",
          "type": "number"
        },
        "fps": {
          "default": 0,
          "description": "Frames per second",
          "title": "Fps",
          "type": "integer"
        }
      },
      "title": "VideoMeta",
      "type": "object"
    },
    "VideoResolution": {
      "description": "Standard video resolution presets.",
      "enum": [
        "480p",
        "720p",
        "1080p",
        "1440p",
        "4k"
      ],
      "title": "VideoResolution",
      "type": "string"
    }
  },
  "properties": {
    "video": {
      "$ref": "#/$defs/File",
      "description": "Generated talking video with lip-sync animation"
    },
    "output_meta": {
      "anyOf": [
        {
          "$ref": "#/$defs/OutputMeta"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "Structured metadata about inputs/outputs for pricing calculation"
    }
  },
  "required": [
    "video"
  ],
  "title": "AppOutput",
  "type": "object"
}