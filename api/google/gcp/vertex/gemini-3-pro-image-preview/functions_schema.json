{
  "run": {
    "description": "Generate or edit images using Gemini 3 Pro Image Preview model via Vertex AI.",
    "input_schema": {
      "$defs": {
        "AspectRatioAutoEnum": {
          "description": "Aspect ratio options with auto detection.",
          "enum": [
            "auto",
            "21:9",
            "16:9",
            "3:2",
            "4:3",
            "5:4",
            "1:1",
            "4:5",
            "3:4",
            "2:3",
            "9:16"
          ],
          "title": "AspectRatioAutoEnum",
          "type": "string"
        },
        "File": {
          "$id": "/schemas/File",
          "oneOf": [
            {
              "description": "A class representing a file in the inference.sh ecosystem.",
              "properties": {
                "uri": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": null,
                  "title": "Uri"
                },
                "path": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": null,
                  "title": "Path"
                },
                "content_type": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": null,
                  "title": "Content Type"
                },
                "size": {
                  "anyOf": [
                    {
                      "type": "integer"
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": null,
                  "title": "Size"
                },
                "filename": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": null,
                  "title": "Filename"
                }
              },
              "title": "File",
              "type": "object"
            },
            {
              "type": "string"
            }
          ]
        },
        "OutputFormatEnum": {
          "description": "Output format options for images.",
          "enum": [
            "png",
            "jpeg",
            "webp"
          ],
          "title": "OutputFormatEnum",
          "type": "string"
        },
        "ResolutionEnum": {
          "description": "Resolution options.",
          "enum": [
            "1K",
            "2K",
            "4K"
          ],
          "title": "ResolutionEnum",
          "type": "string"
        }
      },
      "properties": {
        "prompt": {
          "description": "The prompt for image generation or editing. Describe what you want to create or change.",
          "title": "Prompt",
          "type": "string"
        },
        "images": {
          "anyOf": [
            {
              "items": {
                "$ref": "#/$defs/File"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Optional list of input images for editing (up to 14 images). When provided, the model will edit these images based on the prompt. When not provided, the model will generate new images from the text prompt. Supported formats: JPEG, PNG, WebP",
          "title": "Images"
        },
        "num_images": {
          "default": 1,
          "description": "Number of images to generate.",
          "maximum": 4,
          "minimum": 1,
          "title": "Num Images",
          "type": "integer"
        },
        "aspect_ratio": {
          "$ref": "#/$defs/AspectRatioAutoEnum",
          "default": "1:1",
          "description": "Aspect ratio for the output image. Use 'auto' to automatically match the first input image's aspect ratio. Default: 1:1"
        },
        "resolution": {
          "$ref": "#/$defs/ResolutionEnum",
          "default": "1K",
          "description": "Output resolution. Options: 1K, 2K, 4K. Default: 1K"
        },
        "output_format": {
          "$ref": "#/$defs/OutputFormatEnum",
          "default": "png",
          "description": "Output format for the generated images."
        },
        "enable_google_search": {
          "default": false,
          "description": "Enable Google Search grounding for real-time information (weather, news, etc.)",
          "title": "Enable Google Search",
          "type": "boolean"
        }
      },
      "required": [
        "prompt"
      ],
      "title": "AppInput",
      "type": "object"
    },
    "output_schema": {
      "$defs": {
        "AudioMeta": {
          "description": "Metadata for audio inputs/outputs.",
          "properties": {
            "type": {
              "default": "audio",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "seconds": {
              "default": 0,
              "description": "Duration in seconds",
              "title": "Seconds",
              "type": "number"
            },
            "sample_rate": {
              "default": 0,
              "description": "Sample rate in Hz",
              "title": "Sample Rate",
              "type": "integer"
            }
          },
          "title": "AudioMeta",
          "type": "object"
        },
        "File": {
          "$id": "/schemas/File",
          "oneOf": [
            {
              "description": "A class representing a file in the inference.sh ecosystem.",
              "properties": {
                "uri": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": null,
                  "title": "Uri"
                },
                "path": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": null,
                  "title": "Path"
                },
                "content_type": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": null,
                  "title": "Content Type"
                },
                "size": {
                  "anyOf": [
                    {
                      "type": "integer"
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": null,
                  "title": "Size"
                },
                "filename": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": null,
                  "title": "Filename"
                }
              },
              "title": "File",
              "type": "object"
            },
            {
              "type": "string"
            }
          ]
        },
        "ImageMeta": {
          "description": "Metadata for image inputs/outputs.",
          "properties": {
            "type": {
              "default": "image",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "width": {
              "default": 0,
              "description": "Image width in pixels",
              "title": "Width",
              "type": "integer"
            },
            "height": {
              "default": 0,
              "description": "Image height in pixels",
              "title": "Height",
              "type": "integer"
            },
            "resolution_mp": {
              "default": 0,
              "description": "Resolution in megapixels (width * height / 1_000_000)",
              "title": "Resolution Mp",
              "type": "number"
            },
            "steps": {
              "default": 0,
              "description": "Number of diffusion steps",
              "title": "Steps",
              "type": "integer"
            },
            "count": {
              "default": 1,
              "description": "Number of images",
              "title": "Count",
              "type": "integer"
            }
          },
          "title": "ImageMeta",
          "type": "object"
        },
        "OutputMeta": {
          "description": "Structured metadata about task inputs and outputs for pricing calculation.\n\nApps include this in their output to report what was consumed (inputs)\nand what was produced (outputs). The backend uses this with CEL expressions\nto calculate app-level pricing.\n\nExample usage in an LLM app:\n    output_meta = OutputMeta(\n        inputs=[TextMeta(tokens=150)],\n        outputs=[TextMeta(tokens=500)]\n    )\n\nExample usage in a video generation app:\n    output_meta = OutputMeta(\n        outputs=[VideoMeta(\n            resolution=VideoResolution.RES_1080P,\n            resolution_mp=2.07,\n            seconds=10.5,\n            fps=30\n        )]\n    )",
          "properties": {
            "inputs": {
              "description": "Metadata about consumed inputs",
              "items": {
                "anyOf": [
                  {
                    "$ref": "#/$defs/TextMeta"
                  },
                  {
                    "$ref": "#/$defs/ImageMeta"
                  },
                  {
                    "$ref": "#/$defs/VideoMeta"
                  },
                  {
                    "$ref": "#/$defs/AudioMeta"
                  },
                  {
                    "$ref": "#/$defs/RawMeta"
                  }
                ]
              },
              "title": "Inputs",
              "type": "array"
            },
            "outputs": {
              "description": "Metadata about produced outputs",
              "items": {
                "anyOf": [
                  {
                    "$ref": "#/$defs/TextMeta"
                  },
                  {
                    "$ref": "#/$defs/ImageMeta"
                  },
                  {
                    "$ref": "#/$defs/VideoMeta"
                  },
                  {
                    "$ref": "#/$defs/AudioMeta"
                  },
                  {
                    "$ref": "#/$defs/RawMeta"
                  }
                ]
              },
              "title": "Outputs",
              "type": "array"
            }
          },
          "title": "OutputMeta",
          "type": "object"
        },
        "RawMeta": {
          "description": "Metadata for raw inputs/outputs used for custom pricing.",
          "properties": {
            "type": {
              "default": "raw",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "cost": {
              "default": 0,
              "description": "Cost in dollar cents",
              "title": "Cost",
              "type": "number"
            }
          },
          "title": "RawMeta",
          "type": "object"
        },
        "TextMeta": {
          "description": "Metadata for text inputs/outputs (e.g., LLM tokens).",
          "properties": {
            "type": {
              "default": "text",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "tokens": {
              "default": 0,
              "description": "Token count - in inputs[] = input tokens, in outputs[] = output tokens",
              "title": "Tokens",
              "type": "integer"
            }
          },
          "title": "TextMeta",
          "type": "object"
        },
        "VideoMeta": {
          "description": "Metadata for video inputs/outputs.",
          "properties": {
            "type": {
              "default": "video",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "width": {
              "default": 0,
              "description": "Video width in pixels",
              "title": "Width",
              "type": "integer"
            },
            "height": {
              "default": 0,
              "description": "Video height in pixels",
              "title": "Height",
              "type": "integer"
            },
            "resolution_mp": {
              "default": 0,
              "description": "Resolution in megapixels per frame",
              "title": "Resolution Mp",
              "type": "number"
            },
            "resolution": {
              "anyOf": [
                {
                  "$ref": "#/$defs/VideoResolution"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Standard resolution preset (480p, 720p, 1080p, 1440p, 4k)"
            },
            "seconds": {
              "default": 0,
              "description": "Duration in seconds",
              "title": "Seconds",
              "type": "number"
            },
            "fps": {
              "default": 0,
              "description": "Frames per second",
              "title": "Fps",
              "type": "integer"
            }
          },
          "title": "VideoMeta",
          "type": "object"
        },
        "VideoResolution": {
          "description": "Standard video resolution presets.",
          "enum": [
            "480p",
            "720p",
            "1080p",
            "1440p",
            "4k"
          ],
          "title": "VideoResolution",
          "type": "string"
        }
      },
      "properties": {
        "images": {
          "description": "The generated or edited images",
          "items": {
            "$ref": "#/$defs/File"
          },
          "title": "Images",
          "type": "array"
        },
        "description": {
          "default": "",
          "description": "Text description or response from the model",
          "title": "Description",
          "type": "string"
        },
        "output_meta": {
          "anyOf": [
            {
              "$ref": "#/$defs/OutputMeta"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Structured metadata about inputs/outputs for pricing calculation"
        }
      },
      "required": [
        "images"
      ],
      "title": "AppOutput",
      "type": "object"
    }
  }
}