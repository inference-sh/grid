{
  "clear": {
    "description": "Clear all state.",
    "input_schema": {
      "properties": {},
      "title": "ClearInput",
      "type": "object"
    },
    "output_schema": {
      "$defs": {
        "AudioMeta": {
          "description": "Metadata for audio inputs/outputs.",
          "properties": {
            "type": {
              "default": "audio",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "seconds": {
              "default": 0,
              "description": "Duration in seconds",
              "title": "Seconds",
              "type": "number"
            },
            "sample_rate": {
              "default": 0,
              "description": "Sample rate in Hz",
              "title": "Sample Rate",
              "type": "integer"
            }
          },
          "title": "AudioMeta",
          "type": "object"
        },
        "ImageMeta": {
          "description": "Metadata for image inputs/outputs.",
          "properties": {
            "type": {
              "default": "image",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "width": {
              "default": 0,
              "description": "Image width in pixels",
              "title": "Width",
              "type": "integer"
            },
            "height": {
              "default": 0,
              "description": "Image height in pixels",
              "title": "Height",
              "type": "integer"
            },
            "resolution_mp": {
              "default": 0,
              "description": "Resolution in megapixels (width * height / 1_000_000)",
              "title": "Resolution Mp",
              "type": "number"
            },
            "steps": {
              "default": 0,
              "description": "Number of diffusion steps",
              "title": "Steps",
              "type": "integer"
            },
            "count": {
              "default": 1,
              "description": "Number of images",
              "title": "Count",
              "type": "integer"
            }
          },
          "title": "ImageMeta",
          "type": "object"
        },
        "OutputMeta": {
          "description": "Structured metadata about task inputs and outputs for pricing calculation.\n\nApps include this in their output to report what was consumed (inputs)\nand what was produced (outputs). The backend uses this with CEL expressions\nto calculate app-level pricing.\n\nExample usage in an LLM app:\n    output_meta = OutputMeta(\n        inputs=[TextMeta(tokens=150)],\n        outputs=[TextMeta(tokens=500)]\n    )\n\nExample usage in a video generation app:\n    output_meta = OutputMeta(\n        outputs=[VideoMeta(\n            resolution=VideoResolution.RES_1080P,\n            resolution_mp=2.07,\n            seconds=10.5,\n            fps=30\n        )]\n    )",
          "properties": {
            "inputs": {
              "description": "Metadata about consumed inputs",
              "items": {
                "anyOf": [
                  {
                    "$ref": "#/$defs/TextMeta"
                  },
                  {
                    "$ref": "#/$defs/ImageMeta"
                  },
                  {
                    "$ref": "#/$defs/VideoMeta"
                  },
                  {
                    "$ref": "#/$defs/AudioMeta"
                  },
                  {
                    "$ref": "#/$defs/RawMeta"
                  }
                ]
              },
              "title": "Inputs",
              "type": "array"
            },
            "outputs": {
              "description": "Metadata about produced outputs",
              "items": {
                "anyOf": [
                  {
                    "$ref": "#/$defs/TextMeta"
                  },
                  {
                    "$ref": "#/$defs/ImageMeta"
                  },
                  {
                    "$ref": "#/$defs/VideoMeta"
                  },
                  {
                    "$ref": "#/$defs/AudioMeta"
                  },
                  {
                    "$ref": "#/$defs/RawMeta"
                  }
                ]
              },
              "title": "Outputs",
              "type": "array"
            }
          },
          "title": "OutputMeta",
          "type": "object"
        },
        "RawMeta": {
          "description": "Metadata for raw inputs/outputs used for custom pricing.",
          "properties": {
            "type": {
              "default": "raw",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "cost": {
              "default": 0,
              "description": "Cost in dollar cents",
              "title": "Cost",
              "type": "number"
            }
          },
          "title": "RawMeta",
          "type": "object"
        },
        "TextMeta": {
          "description": "Metadata for text inputs/outputs (e.g., LLM tokens).",
          "properties": {
            "type": {
              "default": "text",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "tokens": {
              "default": 0,
              "description": "Token count - in inputs[] = input tokens, in outputs[] = output tokens",
              "title": "Tokens",
              "type": "integer"
            }
          },
          "title": "TextMeta",
          "type": "object"
        },
        "VideoMeta": {
          "description": "Metadata for video inputs/outputs.",
          "properties": {
            "type": {
              "default": "video",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "width": {
              "default": 0,
              "description": "Video width in pixels",
              "title": "Width",
              "type": "integer"
            },
            "height": {
              "default": 0,
              "description": "Video height in pixels",
              "title": "Height",
              "type": "integer"
            },
            "resolution_mp": {
              "default": 0,
              "description": "Resolution in megapixels per frame",
              "title": "Resolution Mp",
              "type": "number"
            },
            "resolution": {
              "anyOf": [
                {
                  "$ref": "#/$defs/VideoResolution"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Standard resolution preset (480p, 720p, 1080p, 1440p, 4k)"
            },
            "seconds": {
              "default": 0,
              "description": "Duration in seconds",
              "title": "Seconds",
              "type": "number"
            },
            "fps": {
              "default": 0,
              "description": "Frames per second",
              "title": "Fps",
              "type": "integer"
            }
          },
          "title": "VideoMeta",
          "type": "object"
        },
        "VideoResolution": {
          "description": "Standard video resolution presets.",
          "enum": [
            "480p",
            "720p",
            "1080p",
            "1440p",
            "4k"
          ],
          "title": "VideoResolution",
          "type": "string"
        }
      },
      "properties": {
        "cleared_keys": {
          "description": "Keys that were cleared",
          "items": {
            "type": "string"
          },
          "title": "Cleared Keys",
          "type": "array"
        },
        "output_meta": {
          "anyOf": [
            {
              "$ref": "#/$defs/OutputMeta"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Structured metadata about inputs/outputs for pricing calculation"
        }
      },
      "required": [
        "cleared_keys"
      ],
      "title": "ClearOutput",
      "type": "object"
    }
  },
  "get_all": {
    "description": "Return all stored state.",
    "input_schema": {
      "properties": {},
      "title": "GetAllInput",
      "type": "object"
    },
    "output_schema": {
      "$defs": {
        "AudioMeta": {
          "description": "Metadata for audio inputs/outputs.",
          "properties": {
            "type": {
              "default": "audio",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "seconds": {
              "default": 0,
              "description": "Duration in seconds",
              "title": "Seconds",
              "type": "number"
            },
            "sample_rate": {
              "default": 0,
              "description": "Sample rate in Hz",
              "title": "Sample Rate",
              "type": "integer"
            }
          },
          "title": "AudioMeta",
          "type": "object"
        },
        "ImageMeta": {
          "description": "Metadata for image inputs/outputs.",
          "properties": {
            "type": {
              "default": "image",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "width": {
              "default": 0,
              "description": "Image width in pixels",
              "title": "Width",
              "type": "integer"
            },
            "height": {
              "default": 0,
              "description": "Image height in pixels",
              "title": "Height",
              "type": "integer"
            },
            "resolution_mp": {
              "default": 0,
              "description": "Resolution in megapixels (width * height / 1_000_000)",
              "title": "Resolution Mp",
              "type": "number"
            },
            "steps": {
              "default": 0,
              "description": "Number of diffusion steps",
              "title": "Steps",
              "type": "integer"
            },
            "count": {
              "default": 1,
              "description": "Number of images",
              "title": "Count",
              "type": "integer"
            }
          },
          "title": "ImageMeta",
          "type": "object"
        },
        "OutputMeta": {
          "description": "Structured metadata about task inputs and outputs for pricing calculation.\n\nApps include this in their output to report what was consumed (inputs)\nand what was produced (outputs). The backend uses this with CEL expressions\nto calculate app-level pricing.\n\nExample usage in an LLM app:\n    output_meta = OutputMeta(\n        inputs=[TextMeta(tokens=150)],\n        outputs=[TextMeta(tokens=500)]\n    )\n\nExample usage in a video generation app:\n    output_meta = OutputMeta(\n        outputs=[VideoMeta(\n            resolution=VideoResolution.RES_1080P,\n            resolution_mp=2.07,\n            seconds=10.5,\n            fps=30\n        )]\n    )",
          "properties": {
            "inputs": {
              "description": "Metadata about consumed inputs",
              "items": {
                "anyOf": [
                  {
                    "$ref": "#/$defs/TextMeta"
                  },
                  {
                    "$ref": "#/$defs/ImageMeta"
                  },
                  {
                    "$ref": "#/$defs/VideoMeta"
                  },
                  {
                    "$ref": "#/$defs/AudioMeta"
                  },
                  {
                    "$ref": "#/$defs/RawMeta"
                  }
                ]
              },
              "title": "Inputs",
              "type": "array"
            },
            "outputs": {
              "description": "Metadata about produced outputs",
              "items": {
                "anyOf": [
                  {
                    "$ref": "#/$defs/TextMeta"
                  },
                  {
                    "$ref": "#/$defs/ImageMeta"
                  },
                  {
                    "$ref": "#/$defs/VideoMeta"
                  },
                  {
                    "$ref": "#/$defs/AudioMeta"
                  },
                  {
                    "$ref": "#/$defs/RawMeta"
                  }
                ]
              },
              "title": "Outputs",
              "type": "array"
            }
          },
          "title": "OutputMeta",
          "type": "object"
        },
        "RawMeta": {
          "description": "Metadata for raw inputs/outputs used for custom pricing.",
          "properties": {
            "type": {
              "default": "raw",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "cost": {
              "default": 0,
              "description": "Cost in dollar cents",
              "title": "Cost",
              "type": "number"
            }
          },
          "title": "RawMeta",
          "type": "object"
        },
        "TextMeta": {
          "description": "Metadata for text inputs/outputs (e.g., LLM tokens).",
          "properties": {
            "type": {
              "default": "text",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "tokens": {
              "default": 0,
              "description": "Token count - in inputs[] = input tokens, in outputs[] = output tokens",
              "title": "Tokens",
              "type": "integer"
            }
          },
          "title": "TextMeta",
          "type": "object"
        },
        "VideoMeta": {
          "description": "Metadata for video inputs/outputs.",
          "properties": {
            "type": {
              "default": "video",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "width": {
              "default": 0,
              "description": "Video width in pixels",
              "title": "Width",
              "type": "integer"
            },
            "height": {
              "default": 0,
              "description": "Video height in pixels",
              "title": "Height",
              "type": "integer"
            },
            "resolution_mp": {
              "default": 0,
              "description": "Resolution in megapixels per frame",
              "title": "Resolution Mp",
              "type": "number"
            },
            "resolution": {
              "anyOf": [
                {
                  "$ref": "#/$defs/VideoResolution"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Standard resolution preset (480p, 720p, 1080p, 1440p, 4k)"
            },
            "seconds": {
              "default": 0,
              "description": "Duration in seconds",
              "title": "Seconds",
              "type": "number"
            },
            "fps": {
              "default": 0,
              "description": "Frames per second",
              "title": "Fps",
              "type": "integer"
            }
          },
          "title": "VideoMeta",
          "type": "object"
        },
        "VideoResolution": {
          "description": "Standard video resolution presets.",
          "enum": [
            "480p",
            "720p",
            "1080p",
            "1440p",
            "4k"
          ],
          "title": "VideoResolution",
          "type": "string"
        }
      },
      "properties": {
        "state": {
          "additionalProperties": true,
          "description": "All stored key-value pairs",
          "title": "State",
          "type": "object"
        },
        "call_count": {
          "description": "Number of calls in this session",
          "title": "Call Count",
          "type": "integer"
        },
        "output_meta": {
          "anyOf": [
            {
              "$ref": "#/$defs/OutputMeta"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Structured metadata about inputs/outputs for pricing calculation"
        }
      },
      "required": [
        "state",
        "call_count"
      ],
      "title": "GetAllOutput",
      "type": "object"
    }
  },
  "get_value": {
    "description": "Retrieve a value by key.",
    "input_schema": {
      "properties": {
        "key": {
          "description": "Key to retrieve",
          "title": "Key",
          "type": "string"
        }
      },
      "required": [
        "key"
      ],
      "title": "GetValueInput",
      "type": "object"
    },
    "output_schema": {
      "$defs": {
        "AudioMeta": {
          "description": "Metadata for audio inputs/outputs.",
          "properties": {
            "type": {
              "default": "audio",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "seconds": {
              "default": 0,
              "description": "Duration in seconds",
              "title": "Seconds",
              "type": "number"
            },
            "sample_rate": {
              "default": 0,
              "description": "Sample rate in Hz",
              "title": "Sample Rate",
              "type": "integer"
            }
          },
          "title": "AudioMeta",
          "type": "object"
        },
        "ImageMeta": {
          "description": "Metadata for image inputs/outputs.",
          "properties": {
            "type": {
              "default": "image",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "width": {
              "default": 0,
              "description": "Image width in pixels",
              "title": "Width",
              "type": "integer"
            },
            "height": {
              "default": 0,
              "description": "Image height in pixels",
              "title": "Height",
              "type": "integer"
            },
            "resolution_mp": {
              "default": 0,
              "description": "Resolution in megapixels (width * height / 1_000_000)",
              "title": "Resolution Mp",
              "type": "number"
            },
            "steps": {
              "default": 0,
              "description": "Number of diffusion steps",
              "title": "Steps",
              "type": "integer"
            },
            "count": {
              "default": 1,
              "description": "Number of images",
              "title": "Count",
              "type": "integer"
            }
          },
          "title": "ImageMeta",
          "type": "object"
        },
        "OutputMeta": {
          "description": "Structured metadata about task inputs and outputs for pricing calculation.\n\nApps include this in their output to report what was consumed (inputs)\nand what was produced (outputs). The backend uses this with CEL expressions\nto calculate app-level pricing.\n\nExample usage in an LLM app:\n    output_meta = OutputMeta(\n        inputs=[TextMeta(tokens=150)],\n        outputs=[TextMeta(tokens=500)]\n    )\n\nExample usage in a video generation app:\n    output_meta = OutputMeta(\n        outputs=[VideoMeta(\n            resolution=VideoResolution.RES_1080P,\n            resolution_mp=2.07,\n            seconds=10.5,\n            fps=30\n        )]\n    )",
          "properties": {
            "inputs": {
              "description": "Metadata about consumed inputs",
              "items": {
                "anyOf": [
                  {
                    "$ref": "#/$defs/TextMeta"
                  },
                  {
                    "$ref": "#/$defs/ImageMeta"
                  },
                  {
                    "$ref": "#/$defs/VideoMeta"
                  },
                  {
                    "$ref": "#/$defs/AudioMeta"
                  },
                  {
                    "$ref": "#/$defs/RawMeta"
                  }
                ]
              },
              "title": "Inputs",
              "type": "array"
            },
            "outputs": {
              "description": "Metadata about produced outputs",
              "items": {
                "anyOf": [
                  {
                    "$ref": "#/$defs/TextMeta"
                  },
                  {
                    "$ref": "#/$defs/ImageMeta"
                  },
                  {
                    "$ref": "#/$defs/VideoMeta"
                  },
                  {
                    "$ref": "#/$defs/AudioMeta"
                  },
                  {
                    "$ref": "#/$defs/RawMeta"
                  }
                ]
              },
              "title": "Outputs",
              "type": "array"
            }
          },
          "title": "OutputMeta",
          "type": "object"
        },
        "RawMeta": {
          "description": "Metadata for raw inputs/outputs used for custom pricing.",
          "properties": {
            "type": {
              "default": "raw",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "cost": {
              "default": 0,
              "description": "Cost in dollar cents",
              "title": "Cost",
              "type": "number"
            }
          },
          "title": "RawMeta",
          "type": "object"
        },
        "TextMeta": {
          "description": "Metadata for text inputs/outputs (e.g., LLM tokens).",
          "properties": {
            "type": {
              "default": "text",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "tokens": {
              "default": 0,
              "description": "Token count - in inputs[] = input tokens, in outputs[] = output tokens",
              "title": "Tokens",
              "type": "integer"
            }
          },
          "title": "TextMeta",
          "type": "object"
        },
        "VideoMeta": {
          "description": "Metadata for video inputs/outputs.",
          "properties": {
            "type": {
              "default": "video",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "width": {
              "default": 0,
              "description": "Video width in pixels",
              "title": "Width",
              "type": "integer"
            },
            "height": {
              "default": 0,
              "description": "Video height in pixels",
              "title": "Height",
              "type": "integer"
            },
            "resolution_mp": {
              "default": 0,
              "description": "Resolution in megapixels per frame",
              "title": "Resolution Mp",
              "type": "number"
            },
            "resolution": {
              "anyOf": [
                {
                  "$ref": "#/$defs/VideoResolution"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Standard resolution preset (480p, 720p, 1080p, 1440p, 4k)"
            },
            "seconds": {
              "default": 0,
              "description": "Duration in seconds",
              "title": "Seconds",
              "type": "number"
            },
            "fps": {
              "default": 0,
              "description": "Frames per second",
              "title": "Fps",
              "type": "integer"
            }
          },
          "title": "VideoMeta",
          "type": "object"
        },
        "VideoResolution": {
          "description": "Standard video resolution presets.",
          "enum": [
            "480p",
            "720p",
            "1080p",
            "1440p",
            "4k"
          ],
          "title": "VideoResolution",
          "type": "string"
        }
      },
      "properties": {
        "found": {
          "description": "Whether the key was found",
          "title": "Found",
          "type": "boolean"
        },
        "key": {
          "description": "Key that was requested",
          "title": "Key",
          "type": "string"
        },
        "value": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Value if found",
          "title": "Value"
        },
        "output_meta": {
          "anyOf": [
            {
              "$ref": "#/$defs/OutputMeta"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Structured metadata about inputs/outputs for pricing calculation"
        }
      },
      "required": [
        "found",
        "key"
      ],
      "title": "GetValueOutput",
      "type": "object"
    }
  },
  "increment": {
    "description": "Increment a counter.",
    "input_schema": {
      "properties": {
        "key": {
          "default": "counter",
          "description": "Counter key to increment",
          "title": "Key",
          "type": "string"
        },
        "amount": {
          "default": 1,
          "description": "Amount to increment by",
          "title": "Amount",
          "type": "integer"
        }
      },
      "title": "IncrementInput",
      "type": "object"
    },
    "output_schema": {
      "$defs": {
        "AudioMeta": {
          "description": "Metadata for audio inputs/outputs.",
          "properties": {
            "type": {
              "default": "audio",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "seconds": {
              "default": 0,
              "description": "Duration in seconds",
              "title": "Seconds",
              "type": "number"
            },
            "sample_rate": {
              "default": 0,
              "description": "Sample rate in Hz",
              "title": "Sample Rate",
              "type": "integer"
            }
          },
          "title": "AudioMeta",
          "type": "object"
        },
        "ImageMeta": {
          "description": "Metadata for image inputs/outputs.",
          "properties": {
            "type": {
              "default": "image",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "width": {
              "default": 0,
              "description": "Image width in pixels",
              "title": "Width",
              "type": "integer"
            },
            "height": {
              "default": 0,
              "description": "Image height in pixels",
              "title": "Height",
              "type": "integer"
            },
            "resolution_mp": {
              "default": 0,
              "description": "Resolution in megapixels (width * height / 1_000_000)",
              "title": "Resolution Mp",
              "type": "number"
            },
            "steps": {
              "default": 0,
              "description": "Number of diffusion steps",
              "title": "Steps",
              "type": "integer"
            },
            "count": {
              "default": 1,
              "description": "Number of images",
              "title": "Count",
              "type": "integer"
            }
          },
          "title": "ImageMeta",
          "type": "object"
        },
        "OutputMeta": {
          "description": "Structured metadata about task inputs and outputs for pricing calculation.\n\nApps include this in their output to report what was consumed (inputs)\nand what was produced (outputs). The backend uses this with CEL expressions\nto calculate app-level pricing.\n\nExample usage in an LLM app:\n    output_meta = OutputMeta(\n        inputs=[TextMeta(tokens=150)],\n        outputs=[TextMeta(tokens=500)]\n    )\n\nExample usage in a video generation app:\n    output_meta = OutputMeta(\n        outputs=[VideoMeta(\n            resolution=VideoResolution.RES_1080P,\n            resolution_mp=2.07,\n            seconds=10.5,\n            fps=30\n        )]\n    )",
          "properties": {
            "inputs": {
              "description": "Metadata about consumed inputs",
              "items": {
                "anyOf": [
                  {
                    "$ref": "#/$defs/TextMeta"
                  },
                  {
                    "$ref": "#/$defs/ImageMeta"
                  },
                  {
                    "$ref": "#/$defs/VideoMeta"
                  },
                  {
                    "$ref": "#/$defs/AudioMeta"
                  },
                  {
                    "$ref": "#/$defs/RawMeta"
                  }
                ]
              },
              "title": "Inputs",
              "type": "array"
            },
            "outputs": {
              "description": "Metadata about produced outputs",
              "items": {
                "anyOf": [
                  {
                    "$ref": "#/$defs/TextMeta"
                  },
                  {
                    "$ref": "#/$defs/ImageMeta"
                  },
                  {
                    "$ref": "#/$defs/VideoMeta"
                  },
                  {
                    "$ref": "#/$defs/AudioMeta"
                  },
                  {
                    "$ref": "#/$defs/RawMeta"
                  }
                ]
              },
              "title": "Outputs",
              "type": "array"
            }
          },
          "title": "OutputMeta",
          "type": "object"
        },
        "RawMeta": {
          "description": "Metadata for raw inputs/outputs used for custom pricing.",
          "properties": {
            "type": {
              "default": "raw",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "cost": {
              "default": 0,
              "description": "Cost in dollar cents",
              "title": "Cost",
              "type": "number"
            }
          },
          "title": "RawMeta",
          "type": "object"
        },
        "TextMeta": {
          "description": "Metadata for text inputs/outputs (e.g., LLM tokens).",
          "properties": {
            "type": {
              "default": "text",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "tokens": {
              "default": 0,
              "description": "Token count - in inputs[] = input tokens, in outputs[] = output tokens",
              "title": "Tokens",
              "type": "integer"
            }
          },
          "title": "TextMeta",
          "type": "object"
        },
        "VideoMeta": {
          "description": "Metadata for video inputs/outputs.",
          "properties": {
            "type": {
              "default": "video",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "width": {
              "default": 0,
              "description": "Video width in pixels",
              "title": "Width",
              "type": "integer"
            },
            "height": {
              "default": 0,
              "description": "Video height in pixels",
              "title": "Height",
              "type": "integer"
            },
            "resolution_mp": {
              "default": 0,
              "description": "Resolution in megapixels per frame",
              "title": "Resolution Mp",
              "type": "number"
            },
            "resolution": {
              "anyOf": [
                {
                  "$ref": "#/$defs/VideoResolution"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Standard resolution preset (480p, 720p, 1080p, 1440p, 4k)"
            },
            "seconds": {
              "default": 0,
              "description": "Duration in seconds",
              "title": "Seconds",
              "type": "number"
            },
            "fps": {
              "default": 0,
              "description": "Frames per second",
              "title": "Fps",
              "type": "integer"
            }
          },
          "title": "VideoMeta",
          "type": "object"
        },
        "VideoResolution": {
          "description": "Standard video resolution presets.",
          "enum": [
            "480p",
            "720p",
            "1080p",
            "1440p",
            "4k"
          ],
          "title": "VideoResolution",
          "type": "string"
        }
      },
      "properties": {
        "key": {
          "description": "Counter key",
          "title": "Key",
          "type": "string"
        },
        "previous": {
          "description": "Previous value",
          "title": "Previous",
          "type": "integer"
        },
        "current": {
          "description": "Current value after increment",
          "title": "Current",
          "type": "integer"
        },
        "output_meta": {
          "anyOf": [
            {
              "$ref": "#/$defs/OutputMeta"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Structured metadata about inputs/outputs for pricing calculation"
        }
      },
      "required": [
        "key",
        "previous",
        "current"
      ],
      "title": "IncrementOutput",
      "type": "object"
    }
  },
  "run": {
    "description": "Default run function (same as set_value).",
    "input_schema": {
      "properties": {
        "key": {
          "description": "Key to store",
          "title": "Key",
          "type": "string"
        },
        "value": {
          "description": "Value to store",
          "title": "Value",
          "type": "string"
        }
      },
      "required": [
        "key",
        "value"
      ],
      "title": "SetValueInput",
      "type": "object"
    },
    "output_schema": {
      "$defs": {
        "AudioMeta": {
          "description": "Metadata for audio inputs/outputs.",
          "properties": {
            "type": {
              "default": "audio",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "seconds": {
              "default": 0,
              "description": "Duration in seconds",
              "title": "Seconds",
              "type": "number"
            },
            "sample_rate": {
              "default": 0,
              "description": "Sample rate in Hz",
              "title": "Sample Rate",
              "type": "integer"
            }
          },
          "title": "AudioMeta",
          "type": "object"
        },
        "ImageMeta": {
          "description": "Metadata for image inputs/outputs.",
          "properties": {
            "type": {
              "default": "image",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "width": {
              "default": 0,
              "description": "Image width in pixels",
              "title": "Width",
              "type": "integer"
            },
            "height": {
              "default": 0,
              "description": "Image height in pixels",
              "title": "Height",
              "type": "integer"
            },
            "resolution_mp": {
              "default": 0,
              "description": "Resolution in megapixels (width * height / 1_000_000)",
              "title": "Resolution Mp",
              "type": "number"
            },
            "steps": {
              "default": 0,
              "description": "Number of diffusion steps",
              "title": "Steps",
              "type": "integer"
            },
            "count": {
              "default": 1,
              "description": "Number of images",
              "title": "Count",
              "type": "integer"
            }
          },
          "title": "ImageMeta",
          "type": "object"
        },
        "OutputMeta": {
          "description": "Structured metadata about task inputs and outputs for pricing calculation.\n\nApps include this in their output to report what was consumed (inputs)\nand what was produced (outputs). The backend uses this with CEL expressions\nto calculate app-level pricing.\n\nExample usage in an LLM app:\n    output_meta = OutputMeta(\n        inputs=[TextMeta(tokens=150)],\n        outputs=[TextMeta(tokens=500)]\n    )\n\nExample usage in a video generation app:\n    output_meta = OutputMeta(\n        outputs=[VideoMeta(\n            resolution=VideoResolution.RES_1080P,\n            resolution_mp=2.07,\n            seconds=10.5,\n            fps=30\n        )]\n    )",
          "properties": {
            "inputs": {
              "description": "Metadata about consumed inputs",
              "items": {
                "anyOf": [
                  {
                    "$ref": "#/$defs/TextMeta"
                  },
                  {
                    "$ref": "#/$defs/ImageMeta"
                  },
                  {
                    "$ref": "#/$defs/VideoMeta"
                  },
                  {
                    "$ref": "#/$defs/AudioMeta"
                  },
                  {
                    "$ref": "#/$defs/RawMeta"
                  }
                ]
              },
              "title": "Inputs",
              "type": "array"
            },
            "outputs": {
              "description": "Metadata about produced outputs",
              "items": {
                "anyOf": [
                  {
                    "$ref": "#/$defs/TextMeta"
                  },
                  {
                    "$ref": "#/$defs/ImageMeta"
                  },
                  {
                    "$ref": "#/$defs/VideoMeta"
                  },
                  {
                    "$ref": "#/$defs/AudioMeta"
                  },
                  {
                    "$ref": "#/$defs/RawMeta"
                  }
                ]
              },
              "title": "Outputs",
              "type": "array"
            }
          },
          "title": "OutputMeta",
          "type": "object"
        },
        "RawMeta": {
          "description": "Metadata for raw inputs/outputs used for custom pricing.",
          "properties": {
            "type": {
              "default": "raw",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "cost": {
              "default": 0,
              "description": "Cost in dollar cents",
              "title": "Cost",
              "type": "number"
            }
          },
          "title": "RawMeta",
          "type": "object"
        },
        "TextMeta": {
          "description": "Metadata for text inputs/outputs (e.g., LLM tokens).",
          "properties": {
            "type": {
              "default": "text",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "tokens": {
              "default": 0,
              "description": "Token count - in inputs[] = input tokens, in outputs[] = output tokens",
              "title": "Tokens",
              "type": "integer"
            }
          },
          "title": "TextMeta",
          "type": "object"
        },
        "VideoMeta": {
          "description": "Metadata for video inputs/outputs.",
          "properties": {
            "type": {
              "default": "video",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "width": {
              "default": 0,
              "description": "Video width in pixels",
              "title": "Width",
              "type": "integer"
            },
            "height": {
              "default": 0,
              "description": "Video height in pixels",
              "title": "Height",
              "type": "integer"
            },
            "resolution_mp": {
              "default": 0,
              "description": "Resolution in megapixels per frame",
              "title": "Resolution Mp",
              "type": "number"
            },
            "resolution": {
              "anyOf": [
                {
                  "$ref": "#/$defs/VideoResolution"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Standard resolution preset (480p, 720p, 1080p, 1440p, 4k)"
            },
            "seconds": {
              "default": 0,
              "description": "Duration in seconds",
              "title": "Seconds",
              "type": "number"
            },
            "fps": {
              "default": 0,
              "description": "Frames per second",
              "title": "Fps",
              "type": "integer"
            }
          },
          "title": "VideoMeta",
          "type": "object"
        },
        "VideoResolution": {
          "description": "Standard video resolution presets.",
          "enum": [
            "480p",
            "720p",
            "1080p",
            "1440p",
            "4k"
          ],
          "title": "VideoResolution",
          "type": "string"
        }
      },
      "properties": {
        "success": {
          "description": "Whether the value was stored",
          "title": "Success",
          "type": "boolean"
        },
        "key": {
          "description": "Key that was stored",
          "title": "Key",
          "type": "string"
        },
        "value": {
          "description": "Value that was stored",
          "title": "Value",
          "type": "string"
        },
        "output_meta": {
          "anyOf": [
            {
              "$ref": "#/$defs/OutputMeta"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Structured metadata about inputs/outputs for pricing calculation"
        }
      },
      "required": [
        "success",
        "key",
        "value"
      ],
      "title": "SetValueOutput",
      "type": "object"
    }
  },
  "set_value": {
    "description": "Store a key-value pair in session state.",
    "input_schema": {
      "properties": {
        "key": {
          "description": "Key to store",
          "title": "Key",
          "type": "string"
        },
        "value": {
          "description": "Value to store",
          "title": "Value",
          "type": "string"
        }
      },
      "required": [
        "key",
        "value"
      ],
      "title": "SetValueInput",
      "type": "object"
    },
    "output_schema": {
      "$defs": {
        "AudioMeta": {
          "description": "Metadata for audio inputs/outputs.",
          "properties": {
            "type": {
              "default": "audio",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "seconds": {
              "default": 0,
              "description": "Duration in seconds",
              "title": "Seconds",
              "type": "number"
            },
            "sample_rate": {
              "default": 0,
              "description": "Sample rate in Hz",
              "title": "Sample Rate",
              "type": "integer"
            }
          },
          "title": "AudioMeta",
          "type": "object"
        },
        "ImageMeta": {
          "description": "Metadata for image inputs/outputs.",
          "properties": {
            "type": {
              "default": "image",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "width": {
              "default": 0,
              "description": "Image width in pixels",
              "title": "Width",
              "type": "integer"
            },
            "height": {
              "default": 0,
              "description": "Image height in pixels",
              "title": "Height",
              "type": "integer"
            },
            "resolution_mp": {
              "default": 0,
              "description": "Resolution in megapixels (width * height / 1_000_000)",
              "title": "Resolution Mp",
              "type": "number"
            },
            "steps": {
              "default": 0,
              "description": "Number of diffusion steps",
              "title": "Steps",
              "type": "integer"
            },
            "count": {
              "default": 1,
              "description": "Number of images",
              "title": "Count",
              "type": "integer"
            }
          },
          "title": "ImageMeta",
          "type": "object"
        },
        "OutputMeta": {
          "description": "Structured metadata about task inputs and outputs for pricing calculation.\n\nApps include this in their output to report what was consumed (inputs)\nand what was produced (outputs). The backend uses this with CEL expressions\nto calculate app-level pricing.\n\nExample usage in an LLM app:\n    output_meta = OutputMeta(\n        inputs=[TextMeta(tokens=150)],\n        outputs=[TextMeta(tokens=500)]\n    )\n\nExample usage in a video generation app:\n    output_meta = OutputMeta(\n        outputs=[VideoMeta(\n            resolution=VideoResolution.RES_1080P,\n            resolution_mp=2.07,\n            seconds=10.5,\n            fps=30\n        )]\n    )",
          "properties": {
            "inputs": {
              "description": "Metadata about consumed inputs",
              "items": {
                "anyOf": [
                  {
                    "$ref": "#/$defs/TextMeta"
                  },
                  {
                    "$ref": "#/$defs/ImageMeta"
                  },
                  {
                    "$ref": "#/$defs/VideoMeta"
                  },
                  {
                    "$ref": "#/$defs/AudioMeta"
                  },
                  {
                    "$ref": "#/$defs/RawMeta"
                  }
                ]
              },
              "title": "Inputs",
              "type": "array"
            },
            "outputs": {
              "description": "Metadata about produced outputs",
              "items": {
                "anyOf": [
                  {
                    "$ref": "#/$defs/TextMeta"
                  },
                  {
                    "$ref": "#/$defs/ImageMeta"
                  },
                  {
                    "$ref": "#/$defs/VideoMeta"
                  },
                  {
                    "$ref": "#/$defs/AudioMeta"
                  },
                  {
                    "$ref": "#/$defs/RawMeta"
                  }
                ]
              },
              "title": "Outputs",
              "type": "array"
            }
          },
          "title": "OutputMeta",
          "type": "object"
        },
        "RawMeta": {
          "description": "Metadata for raw inputs/outputs used for custom pricing.",
          "properties": {
            "type": {
              "default": "raw",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "cost": {
              "default": 0,
              "description": "Cost in dollar cents",
              "title": "Cost",
              "type": "number"
            }
          },
          "title": "RawMeta",
          "type": "object"
        },
        "TextMeta": {
          "description": "Metadata for text inputs/outputs (e.g., LLM tokens).",
          "properties": {
            "type": {
              "default": "text",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "tokens": {
              "default": 0,
              "description": "Token count - in inputs[] = input tokens, in outputs[] = output tokens",
              "title": "Tokens",
              "type": "integer"
            }
          },
          "title": "TextMeta",
          "type": "object"
        },
        "VideoMeta": {
          "description": "Metadata for video inputs/outputs.",
          "properties": {
            "type": {
              "default": "video",
              "title": "Type",
              "type": "string"
            },
            "extra": {
              "anyOf": [
                {
                  "additionalProperties": true,
                  "type": "object"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "App-specific key-value pairs for custom pricing factors",
              "title": "Extra"
            },
            "width": {
              "default": 0,
              "description": "Video width in pixels",
              "title": "Width",
              "type": "integer"
            },
            "height": {
              "default": 0,
              "description": "Video height in pixels",
              "title": "Height",
              "type": "integer"
            },
            "resolution_mp": {
              "default": 0,
              "description": "Resolution in megapixels per frame",
              "title": "Resolution Mp",
              "type": "number"
            },
            "resolution": {
              "anyOf": [
                {
                  "$ref": "#/$defs/VideoResolution"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "Standard resolution preset (480p, 720p, 1080p, 1440p, 4k)"
            },
            "seconds": {
              "default": 0,
              "description": "Duration in seconds",
              "title": "Seconds",
              "type": "number"
            },
            "fps": {
              "default": 0,
              "description": "Frames per second",
              "title": "Fps",
              "type": "integer"
            }
          },
          "title": "VideoMeta",
          "type": "object"
        },
        "VideoResolution": {
          "description": "Standard video resolution presets.",
          "enum": [
            "480p",
            "720p",
            "1080p",
            "1440p",
            "4k"
          ],
          "title": "VideoResolution",
          "type": "string"
        }
      },
      "properties": {
        "success": {
          "description": "Whether the value was stored",
          "title": "Success",
          "type": "boolean"
        },
        "key": {
          "description": "Key that was stored",
          "title": "Key",
          "type": "string"
        },
        "value": {
          "description": "Value that was stored",
          "title": "Value",
          "type": "string"
        },
        "output_meta": {
          "anyOf": [
            {
              "$ref": "#/$defs/OutputMeta"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Structured metadata about inputs/outputs for pricing calculation"
        }
      },
      "required": [
        "success",
        "key",
        "value"
      ],
      "title": "SetValueOutput",
      "type": "object"
    }
  }
}