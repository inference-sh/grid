{
  "$defs": {
    "File": {
      "$id": "/schemas/File",
      "oneOf": [
        {
          "description": "A class representing a file in the inference.sh ecosystem.",
          "properties": {
            "uri": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "title": "Uri"
            },
            "path": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "title": "Path"
            },
            "content_type": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "title": "Content Type"
            },
            "size": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "title": "Size"
            },
            "filename": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "title": "Filename"
            }
          },
          "title": "File",
          "type": "object"
        },
        {
          "type": "string"
        }
      ]
    }
  },
  "properties": {
    "driving_video": {
      "$ref": "#/$defs/File",
      "description": "Driving video - person performing the actions you want to transfer"
    },
    "reference_image": {
      "$ref": "#/$defs/File",
      "description": "Reference character image - the character you want to animate"
    },
    "mode": {
      "default": "animation",
      "description": "Mode: 'animation' (character animation) or 'replacement' (replace character in video)",
      "title": "Mode",
      "type": "string"
    },
    "resolution_width": {
      "default": 1280,
      "description": "Target width for processing",
      "maximum": 1920,
      "minimum": 512,
      "title": "Resolution Width",
      "type": "integer"
    },
    "resolution_height": {
      "default": 720,
      "description": "Target height for processing",
      "maximum": 1920,
      "minimum": 512,
      "title": "Resolution Height",
      "type": "integer"
    },
    "fps": {
      "default": 30,
      "description": "Target FPS (-1 to use original video FPS)",
      "maximum": 60,
      "minimum": -1,
      "title": "Fps",
      "type": "integer"
    },
    "retarget_flag": {
      "default": false,
      "description": "Enable pose retargeting (recommended for different body proportions)",
      "title": "Retarget Flag",
      "type": "boolean"
    },
    "use_flux": {
      "default": false,
      "description": "Use FLUX image editing for better pose retargeting (slower but better quality)",
      "title": "Use Flux",
      "type": "boolean"
    },
    "mask_iterations": {
      "default": 3,
      "description": "Mask dilation iterations (replacement mode)",
      "maximum": 10,
      "minimum": 1,
      "title": "Mask Iterations",
      "type": "integer"
    },
    "mask_kernel_size": {
      "default": 7,
      "description": "Mask dilation kernel size (replacement mode)",
      "maximum": 15,
      "minimum": 3,
      "title": "Mask Kernel Size",
      "type": "integer"
    },
    "mask_w_subdivisions": {
      "default": 1,
      "description": "Mask width subdivisions for detail (replacement mode)",
      "maximum": 5,
      "minimum": 1,
      "title": "Mask W Subdivisions",
      "type": "integer"
    },
    "mask_h_subdivisions": {
      "default": 1,
      "description": "Mask height subdivisions for detail (replacement mode)",
      "maximum": 5,
      "minimum": 1,
      "title": "Mask H Subdivisions",
      "type": "integer"
    },
    "clip_len": {
      "default": 77,
      "description": "Frames per clip (must be 4n+1, e.g., 77, 81, 121)",
      "maximum": 121,
      "minimum": 5,
      "title": "Clip Len",
      "type": "integer"
    },
    "refert_num": {
      "default": 1,
      "description": "Temporal guidance frames (1 or 5 recommended)",
      "title": "Refert Num",
      "type": "integer"
    },
    "shift": {
      "default": 5.0,
      "description": "Noise schedule shift parameter",
      "maximum": 10.0,
      "minimum": 1.0,
      "title": "Shift",
      "type": "number"
    },
    "sample_solver": {
      "default": "dpm++",
      "description": "Sampling solver (dpm++ or unipc)",
      "title": "Sample Solver",
      "type": "string"
    },
    "sampling_steps": {
      "default": 20,
      "description": "Number of diffusion steps",
      "maximum": 50,
      "minimum": 10,
      "title": "Sampling Steps",
      "type": "integer"
    },
    "guide_scale": {
      "default": 1.0,
      "description": "Classifier-free guidance scale for expression control",
      "maximum": 10.0,
      "minimum": 1.0,
      "title": "Guide Scale",
      "type": "number"
    },
    "input_prompt": {
      "default": "",
      "description": "Text prompt (leave empty for default: '\u89c6\u9891\u4e2d\u7684\u4eba\u5728\u505a\u52a8\u4f5c')",
      "title": "Input Prompt",
      "type": "string"
    },
    "n_prompt": {
      "default": "",
      "description": "Negative prompt",
      "title": "N Prompt",
      "type": "string"
    },
    "seed": {
      "default": -1,
      "description": "Random seed (-1 for random)",
      "title": "Seed",
      "type": "integer"
    },
    "offload_model": {
      "default": true,
      "description": "Offload models to CPU to save VRAM",
      "title": "Offload Model",
      "type": "boolean"
    }
  },
  "required": [
    "driving_video",
    "reference_image"
  ],
  "title": "AppInput",
  "type": "object"
}